
암호화 / 복호화 시험 API
--------------------------------------------------------------------------------------------------------
Management: testEncryptionStr: get Encryption (Development only)
   문자열을 암호화한다.
http://dev.ddtechi.com:8055/dr/testEncryptionStr?plaintext=1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ 가나다라마바사아자차카타파하
http://dev1.ddtechi.com:8033/dr/testEncryptionStr?plaintext=1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ 가나다라마바사아자차카타파하
< plainText: 암호되지 않은 문서
> cipherText: 암호화된 문서
--------------------------------------------------------------------------------------------------------
Management: testDecryptionStr: get Decryption (Development only)
   암호화된 문자열을 복호화한다.
http://dev.ddtechi.com:8055/dr/testDecryptionStr?cipherText=VAyRZxuerUAjgiDqh9WAx1MvNqb+jCfIN3scgwqUibTfo2eW3AF9DBwebHrCfQ2Eee5u4GhtPL4X1hTnHgKv2Z4T3t67ujIvu7wctmRp1Nidit2XwJjH4q6tLUmTjN+v7ww+T8I1AJH5bI03WgG7NJz4laube8S/rRN7bKzONr2u4QTTRtY0IRZYvxjJxPNRjUJM5nuH7johCspgEToWz/iM+CYmSBVeywfCCQJQAFo=
http://dev1.ddtechi.com:8033/dr/testDecryptionStr?cipherText=VAyRZxuerUAjgiDqh9WAx1MvNqb+jCfIN3scgwqUibTfo2eW3AF9DBwebHrCfQ2Eee5u4GhtPL4X1hTnHgKv2Z4T3t67ujIvu7wctmRp1Nidit2XwJjH4q6tLUmTjN+v7ww+T8I1AJH5bI03WgG7NJz4laube8S/rRN7bKzONr2u4QTTRtY0IRZYvxjJxPNRjUJM5nuH7johCspgEToWz/iM+CYmSBVeywfCCQJQAFo=
< cipherText: 암호화된 문서
> plainText: 복호화된 문서


근로자 앱 API
--------------------------------------------------------------------------------------------------------
URI
/employee/check_version
/employee/passer_reg
/employee/pass_reg
/employee/pass_verify
/employee/beacon_verify
/employee/reg_employee
/employee/verify_employee
/employee/work_list
/employee/exchange_info
--------------------------------------------------------------------------------------------------------
/employee/check_version
앱 버전을 확인한다.
http://0.0.0.0:8000/employee/check_version?v=A.1.0.0.190111
GET
	v=A.1.0.0.190111 ( Platform ( A, I ) . Version ( X.X.X.YYMMDD )

response
	STATUS 200
	STATUS 503
	{
		'msg': '업그레이드가 필요합니다.'
		'url': 'http://...' # itune, google play update
	}
--------------------------------------------------------------------------------------------------------
/employee/passer_reg
출입자 등록 : 출입 대상자를 등록하는 기능 (파견업체나 출입관리를 희망하는 업체(발주사 포함)에서 사용)
POST : json
	{
	    'pass_type' : -2, # -1 : 일반 출입자, -2 : 출입만 관리되는 출입자 
		'phones': [
			'010-1111-2222', '010-2222-3333', ...
		]
	}
response
	STATUS 200
	STATUS 503
	{
		'message': '양식이 잘못되었습니다.'
	}
--------------------------------------------------------------------------------------------------------
/employee/pass_reg
출입등록 : 앱에서 비콘을 3개 인식했을 때 서버에 출근(퇴근)으로 인식하고 보내는 기능
http://0.0.0.0:8000/employee/pass_reg?passer_id=qgf6YHf1z2Fx80DR8o/Lvg&dt=2019-01-21 08:25:35&action=10&major=11001
POST : json
	{
		'passer_id' : '앱 등록시에 부여받은 암호화된 출입자 id',
		'dt' : '2018-01-21 08:25:30',
		'is_in' : 1, # 0: out, 1 : in
		'major' : 11001 # 11 (지역) 001(사업장)
		'beacons' : [
             {'minor': 11001, 'dt_begin': '2019-01-21 08:25:30', 'rssi': -70},
             {'minor': 11002, 'dt_begin': '2019-01-21 08:25:31', 'rssi': -70},
             {'minor': 11003, 'dt_begin': '2019-01-21 08:25:32', 'rssi': -70}
		]
	}
response
	STATUS 200
--------------------------------------------------------------------------------------------------------
/employee/pass_verify
출입확인 : 앱 사용자가 출근(퇴근) 버튼이 활성화 되었을 때 터치하면 서버로 전송
http://0.0.0.0:8000/employee/pass_verify?passer_id=qgf6YHf1z2Fx80DR8o/Lvg&dt=2019-01-21 08:25:35&action=10
POST : json
	{
		'passer_id' : '암호화된 출입자 id',
		'dt' : '2018-12-28 12:53:36',
		'is_in' : 1, # 0: out, 1 : in
	} 
response
	STATUS 200
--------------------------------------------------------------------------------------------------------
/employee/beacon_verify
비콘 확인 : 출입 등록 후 10분 후에 서버로 앱에서 수집된 비콘 정보 전송 - 앱의 비콘 정보 삭제
POST : json
	{
		'passer_id' : '앱 등록시에 부여받은 암호화된 출입자 id',
		'dt' : '2018-01-16 08:29:00',
		'is_in' : 1, # 0: out, 1 : in
		'major' : 11001 # 11 (지역) 001(사업장)
		'beacons' : [
			{'minor': 11001, 'dt_begin': '2018-12-28 12:53:36', 'rssi': -70},
			......
		]
	}
response
	STATUS 200
--------------------------------------------------------------------------------------------------------
/employee/reg_employee
근로자를 등록한다.
근로자 앱을 처음 실행시킬 때 사용한다.
SMS 로 인증 문자(6자리)를 보낸다.
http://0.0.0.0:8000/employee/reg_employee?phone_no=01025573555
POST : json
{
	'phone_no' : '010-1111-2222'
}
response
	STATUS 200 
--------------------------------------------------------------------------------------------------------
/employee/verify_employee
근로자 등록 확인 : 문자로 온 SMS 문자로 근로자를 확인하는 기능 (여기서 사업장에 등록된 근로자인지 확인, 기존 등록 근로자인지 확인)
http://0.0.0.0:8000/employee/verify_employee?phone_no=010-2557-3555&cn=580757&phone_type=A&push_token=token
POST
    { 
	    'phone_no' : '010-1111-2222'
	    'cn' : '6자리 SMS 인증숫자를 문자로 바꾸어 암호화'
    	'phone_type' : 'A' # 안드로이드 폰
	    'push_token' : 'push token'
	}	
response
    STATUS 503
    {
        'msg': '인증번호가 틀립니다.'
    }
	STATUS 200 # 기존 근로자
	{
		'id': '암호화된 id 그대로 보관되어서 사용되어야 함', 'name': '홍길동', 'bank': '기업은행', 'bank_account': '12300000012000',
		'bank_list': ['국민은행', ... 'NH투자증권']
	}
	STATUS 201 # 새로운 근로자 : 이름, 급여 이체 은행, 계좌번호를 입력받아야 함
	{
		'id': '암호화된 id 그대로 보관되어서 사용되어야 함',
		'bank_list': ['국민은행', ... 'NH투자증권']
	}
	STATUS 202 # 출입 정보만 처리하는 출입자
	{
		'id': '암호화된 id'
	}
--------------------------------------------------------------------------------------------------------
/employee/work_list
근로 내용 : 근로자의 근로 내역을 월 기준으로 1년까지 요청함, 캘린더나 목록이 스크롤 될 때 6개월정도 남으면 추가 요청해서 표시할 것
http://0.0.0.0:8000/employee/work_list?passer_id=qgf6YHf1z2Fx80DR8o/Lvg&dt=2018-12
POST
	passer_id='서버로 받아 저장해둔 출입자 id'
	dt = '2018-01'
response
	STATUS 204 # 일한 내용이 없어서 보내줄 데이터가 없다.
	STATUS 200
	{
		'working':
		[
			{ 'action': 10, 'dt_begin': '2018-12-28 12:53:36', 'dt_end': '2018-12-28 12:53:36', 
				'outing': 
				[
					{'dt_begin': '2018-12-28 12:53:36', 'dt_end': '2018-12-28 12:53:36'}
				]
			},
			......
		]
	}
--------------------------------------------------------------------------------------------------------
/employee/exchange_info
근로자 정보 변경 : 근로자의 정보를 변경한다.
	주) 	로그인이 있으면 앱 시작할 때 화면 표출
		항목이 비어있으면 처리하지 않지만 비워서 보내야 한다.
http://0.0.0.0:8000/employee/exchange_info?passer_id=qgf6YHf1z2Fx80DR8o/Lvg&name=박종기&bank=기업은행&bank_account=00012345600123&pNo=010-2557-3555
POST
	{
		'passer_id': '서버로 받아 저장해둔 출입자 id',
		'name': '이름',
		'bank': '기업은행',
		'bank_account': '12300000012000',
		'pNo': '010-2222-3333', # 추후 SMS 확인 절차 추가
	} 
response
	STATUS 200
--------------------------------------------------------------------------------------------------------

운영 웹 API
--------------------------------------------------------------------------------------------------------
URI
/operation/reg_staff
/operation/login
/operation/update_staff
/operation/list_staff
/operation/reg_customer
/operation/update_work_place
/operation/update_beacon
/operation/list_work_place
/operation/list_beacon
--------------------------------------------------------------------------------------------------------
/operation/reg_staff
운영 직원 등록
POST 
	{
		'pNo': '010-1111-2222',
		'id': 'thinking',
		'pw': 'a~~~8282'
	}
response
	STATUS 200
--------------------------------------------------------------------------------------------------------
/operation/login
로그인
POST 
	{
		'id': 'thinking',
		'pw': 'a~~~8282'
	}
response
	STATUS 200
	STATUS 401
		{
		  "err": {
		    "code": 104, 
		    "msg": "The username or password was not correct"
		  }, 
		  "stat": "fail"
		}
--------------------------------------------------------------------------------------------------------
/operation/update_staff
직원 정보를 수정한다.
	주)	항목이 비어있으면 수정하지 않는 항목으로 간주한다.
		response 는 추후 추가될 예정이다.
POST 
	{
		'id': '암호화된 id',
		'before_pw': '기존 비밀번호',
		'login_pw': '변경하려는 비밀번호',
		'name': '이름',
		'position': '직책',
		'department': '부서 or 소속',
		'phone_no': '전화번호',
		'phone_type': '전화 종류', # 10:iPhone, 20: Android
		'push_token': 'token',
		'email': 'id@ddtechi.com'
	}
response
	STATUS 200
	STATUS 503
		{
			'err': {
				'code': 301,
				'msg': '기존 비밀번호가 틀립니다.'
			}
		}

--------------------------------------------------------------------------------------------------------
/operation/list_staff
직원 list 요청
    주)	항목이 비어있으면 수정하지 않는 항목으로 간주한다.
        response 는 추후 추가될 예정이다.
http://0.0.0.0:8000/operation/list_staff?id=&login_id=thinking&login_pw=A~~~8282
GET
    id = 요청직원 id
    login_id = 요청직원 id
    login_pw = 요청직원 pw
response
    STATUS 200
        [{'name':'...', 'position':'...', 'department':'...', 'pNo':'...', 'pType':'...', 'email':'...'}, ...]
    STATUS 503
        {'message': '직원이 아닙니다.'}
--------------------------------------------------------------------------------------------------------
/operation/reg_customer
고객사를 등록한다.
간단한 내용만 넣어서 등록하고 나머지는 고객사 담당자가 추가하도록 한다.
입력한 전화번호로 SMS 에 id 와 pw 를 보낸다.
	주)	항목이 비어있으면 수정하지 않는 항목으로 간주한다.
		response 는 추후 추가될 예정이다.
POST 
	{
		'customer_name': '대덕기공',
		'staff_name': '홍길동',
		'staff_pNo': '010-1111-2222',
		'staff_email': 'id@daeducki.com'
	}
response
	STATUS 200
--------------------------------------------------------------------------------------------------------
/operation/update_work_place
사업장 내용을 수정한다.
	주)	항목이 비어있으면 수정하지 않는 항목으로 간주한다.
		response 는 추후 추가될 예정이다.
POST 
	{
		'id': '암호화된 id',
    	'major': (비콘 major 번호),
    	'staff_name': '박종기',
    	'staff_pNo': '010-2557-3555',
	
    	'place_name': '효성 용연2공장',
    	'contractor_name': '대덕기공',
	
    	'manager_name': '홍길동',
    	'manager_pNo': '010-1111-2222',
    	'manager_email': 'id@daeducki.com',
	
    	'order_name': '(주)효성',
    	'order_staff_name': '제갈공명',
    	'order_staff_pNo': '010-2222-3333',
    	'order_staff_email': 'id@company.com',
	}
response
	STATUS 200
	STATUS 503
		{
			'err': {
				'code': 401,
				'msg': 'id가 틀립니다.'
			}
		}
--------------------------------------------------------------------------------------------------------
/operation/update_beacon
비콘 내용을 수정한다.
	주)	항목이 비어있으면 수정하지 않는 항목으로 간주한다.
		response 는 추후 추가될 예이다.
POST 
	{
		'id': '암호화된 id',
    	'uuid': '12345678-0000-0000-123456789012', # 8-4-4-4-12
    	'major': 12001, # 앞 2자리 지역, 뒷 3자리 일련번호 (max 65536)
    	'minor': 10001, # 앞 2자리 사용 방법(10: 출입, 20:위험지역, 30:통제구역), 뒷 3자리 일련번호
    	'dt_last': '2018-12-28 12:53:36', # 최종 인식 날짜
    	'dt_battery': '2018-12-28 12:53:36', # 최종 밧데리 변경 날짜
    	'work_place_id': -1 # 사업장 id
	}
response
	STATUS 200
	STATUS 503
		{
			'err': {
				'code': 401,
				'msg': 'id가 틀립니다.'
			}
		}
--------------------------------------------------------------------------------------------------------
/operation/list_work_place
사업장 정보 리스트를 요청한다.
GET
	cust_type=10 # 10 : 발주업체, 11 : 파견업체, 12 : 협력업체
	area=10 # 10 : 울산, 11 : 부산, 12 : 경남, 20 : 대구, 경북, 30 : 광주, 전남
response
	STATUS 200
		{
			'no': 20
			'list': [
				{
					'id': '암호화된 id',
    				'major':'10001',
    				'staff_name':'한국인',
    				'staff_pNo':'010-1111-2222',
				
    				'place_name':'(주)효성 용연2공장',
    				'contractor_name':'대덕기공',
				
    				'manager_name':'홍길동',
    				'manager_pNo':'010-2222-3333',
    				'manager_email':'id@daeducki.com',
				
    				'order_name':'(주)효성',
    				'order_staff_name':'제갈공명',
    				'order_staff_pNo':'010-3333-4444',
    				'order_staff_email':'id@company.com',
				},
				......
			]
		}
--------------------------------------------------------------------------------------------------------
/operation/list_beacon
beacon 정보 리스트를 요청한다.
GET
	cust_type=10 # 10 : 발주업체, 11 : 파견업체, 12 : 협력업체
	area=10 # 10 : 울산, 11 : 부산, 12 : 경남, 20 : 대구, 경북, 30 : 광주, 전남
	staff_phone_no=010-1111-2222 # blank to all
	is_problem=y # 문제가 있는 비콘 사업장만 표시	
response
	STATUS 200
		{
			'no': 20
			'list': [
				{
					'id': '암호화된 id',
    				'major':'10001',
    				'staff_name':'한국인',
    				'staff_pNo':'010-1111-2222',
				
    				'place_name':'(주)효성 용연2공장',
    				'contractor_name':'대덕기공',
				
    				'manager_name':'홍길동',
    				'manager_pNo':'010-2222-3333',
    				'manager_email':'id@daeducki.com',
				
    				'order_name':'(주)효성',
    				'order_staff_name':'제갈공명',
    				'order_staff_pNo':'010-3333-4444',
    				'order_staff_email':'id@company.com',
				},
				......
			]
		}
--------------------------------------------------------------------------------------------------------
/operation/detail_beacon
beacon 정보 리스트를 요청한다.
GET
	cust_type=10 # 10 : 발주업체, 11 : 파견업체, 12 : 협력업체
	area=10 # 10 : 울산, 11 : 부산, 12 : 경남, 20 : 대구, 경북, 30 : 광주, 전남
	staff_phone_no=010-1111-2222 # blank to all
	is_problem=y # 문제가 있는 비콘 사업장만 표시	
response
	STATUS 200
		{
			'no': 20
			'list': [
				{
					'id': '암호화된 id',
    				'major':'10001',
    				'staff_name':'한국인',
    				'staff_pNo':'010-1111-2222',
				
    				'place_name':'(주)효성 용연2공장',
    				'contractor_name':'대덕기공',
				
    				'manager_name':'홍길동',
    				'manager_pNo':'010-2222-3333',
    				'manager_email':'id@daeducki.com',
				
    				'order_name':'(주)효성',
    				'order_staff_name':'제갈공명',
    				'order_staff_pNo':'010-3333-4444',
    				'order_staff_email':'id@company.com',

    				'no_inout': 10,
    				'no_err': 1,
    				'dt_last': '2018-12-28 12:53:36',
				},
				......
			]
		}
--------------------------------------------------------------------------------------------------------

고객사 웹 API
--------------------------------------------------------------------------------------------------------
URI
/customer/reg_customer
/customer/list_customer
/customer/reg_staff
/customer/login
/customer/update_staff
/customer/list_staff
	url(r'customer/list_staff$', views.list_staff, name='list_staff'),
--------------------------------------------------------------------------------------------------------
    /customer/reg_customer
    고객사를 등록한다.
    간단한 내용만 넣어서 등록하고 나머지는 고객사 담당자가 추가하도록 한다.
    입력한 전화번호로 SMS 에 id 와 pw 를 보낸다.
    	주)	항목이 비어있으면 수정하지 않는 항목으로 간주한다.
    		response 는 추후 추가될 예정이다.
    http://0.0.0.0:8000/customer/reg_customer?customer_name=대덕테크&staff_name=박종기&staff_pNo=010-2557-3555&staff_email=thinking@ddtechi.com
    POST
    	{
    		'customer_name': '대덕기공',
    		'staff_name': '홍길동',
    		'staff_pNo': '010-1111-2222',
    		'staff_email': 'id@daeducki.com'
    	}
    response
    	STATUS 200
--------------------------------------------------------------------------------------------------------
    /customer/list_customer
    고객사 리스트를 요청한다.
    http://0.0.0.0:8000/customer/list_customer?customer_name=대덕테크&staff_name=박종기&staff_pNo=010-2557-3555&staff_email=thinking@ddtechi.com
    GET
    	customer_name=대덕기공
    	staff_name=홍길동
    	staff_pNo=010-1111-2222
    	staff_email=id@daeducki.com
    response
    	STATUS 200
--------------------------------------------------------------------------------------------------------
    /customer/reg_staff
    고객사 직원을 등록한다.
    	주)	response 는 추후 추가될 예정이다.
	http://0.0.0.0:8000/customer/reg_staff?staff_id=qgf6YHf1z2Fx80DR8o/Lvg&name=이요셉&login_id=hello&login_pw=A~~~8282&position=책임&department=개발&pNo=010-2450-5942&email=hello@ddtechi.com
    POST
    	{
    	    'staff_id':'암호화된 id',
            'name': '홍길동',
            'login_id': 'hong_geal_dong',
            'position': '부장',       # option 비워서 보내도 됨
            'department': '관리부',    # option 비원서 보내도 됨
            'pNo': '010-1111-2222', # '-'를 넣어도 삭제되어 저장 됨
            'email': 'id@daeducki.com',
    	}
    response
    	STATUS 200
--------------------------------------------------------------------------------------------------------
    /customer/login
    로그인
    http://0.0.0.0:8000/customer/login?id=thinking&pw=A~~~8282
    POST
    	{
    		'id': 'thinking',
    		'pw': 'a~~~8282'
    	}
    response
    	STATUS 200
    	STATUS 401
    		{'message':'id 나 비밀번호가 틀립니다.'}
--------------------------------------------------------------------------------------------------------
    /customer/update_staff
    직원 정보를 수정한다.
    	주)	항목이 비어있으면 수정하지 않는 항목으로 간주한다.
    		response 는 추후 추가될 예정이다.
    http://0.0.0.0:8000/customer/update_staff?id=&login_id=temp_1&before_pw=A~~~8282&login_pw=&name=박종기&position=이사&department=개발&phone_no=010-2557-3555&phone_type=10&push_token=unknown&email=thinking@ddtechi.com
    POST
    	{
    		'id': '암호화된 id',           # 아래 login_id 와 둘 중의 하나는 필수
    		'login_id': 'id 로 사용된다.',  # 위 id 와 둘 중의 하나는 필수
    		'before_pw': '기존 비밀번호',     # 필수
    		'login_pw': '변경하려는 비밀번호',
    		'name': '이름',
    		'position': '직책',
    		'department': '부서 or 소속',
    		'phone_no': '전화번호',
    		'phone_type': '전화 종류', # 10:iPhone, 20: Android
    		'push_token': 'token',
    		'email': 'id@ddtechi.com'
    	}
    response
    	STATUS 200
    	STATUS 503
    		{'message': '비밀번호가 틀립니다.'}
--------------------------------------------------------------------------------------------------------
    /customer/list_staff
    직원 list 요청
        주)	항목이 비어있으면 수정하지 않는 항목으로 간주한다.
            response 는 추후 추가될 예정이다.
    http://0.0.0.0:8000/customer/list_staff?id=&login_id=temp_1&login_pw=A~~~8282
    GET
        id = 요청직원 id
        login_id = 요청직원 id
        login_pw = 요청직원 pw
    response
        STATUS 200
            [{'name':'...', 'position':'...', 'department':'...', 'pNo':'...', 'pType':'...', 'email':'...', 'login_id'}, ...]
        STATUS 503
            {'message': '직원이 아닙니다.'}
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------

